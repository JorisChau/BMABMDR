## Compile package and generate the documentation
example(source)
try(roxygen2::roxygenize(load_code = sourceDir), silent = TRUE)
rstan_config() # recompile stan models
pkgbuild::compile_dll()
roxygen2::roxygenize() # generate documentation
# devtools::reload()
# devtools::check()
devtools::build() # build source package
setwd("~/Sequencing/FINAL/PhylTree/v3/timetree020522/")
library(ape)
install.packages("paleotree")
library(paleotree)
phyl <- ape::read.nexus("divergence_tree.nexus")
class(phyl)
plot(phyl)
dates <- read.csv('~/Sequencing/FINAL/PhylTree/v3/input_treeTimev3.csv', header = T)
dates <- dates[order(ordered(dates$name, levels = phyl$tip.label)),]
dates$date = as.Date(dates$date)
dates
plotTreeTime(phyl, dates$date)
?plot.phylo
plotTreeTime(phyl, dates$date, use.edge.length = F)
plotTreeTime(phyl, dates$date, use.edge.length = T, no.margin = T)
# axisPhylo(root.time = as.Date('2019-12-01'))
library(ggtree)
# ggplot(phyl, aes(x, y)) + geom_tree(layout = 'circular') #+ theme_tree2() + geom_tiplab()
#
# ggtree(phyl, mrsd=as.Date('2019-12-01'), aes(x, y)) + theme_tree2() + geom_tiplab(size = 3) #+ geom_rootedge()
ggplot(phyl) + geom_tree() + theme_tree() + geom_tiplab()
p <- ggtree(phyl) %<+% phyl
p +
# geom_nodepoint() +
geom_tiplab() +
geom_tippoint() +
theme_tree2()
p <- ggtree(phyl)
p +
# geom_nodepoint() +
geom_tiplab() +
geom_tippoint() +
theme_tree2()
# ggplot(phyl, aes(x, y)) + geom_tree(layout = 'circular') #+ theme_tree2() + geom_tiplab()
#
# ggtree(phyl, mrsd=as.Date('2019-12-01'), aes(x, y)) + theme_tree2() + geom_tiplab(size = 3) #+ geom_rootedge()
ggplot(phyl) + geom_tree() + theme_tree() + geom_tiplab()
# ggplot(phyl, aes(x, y)) + geom_tree(layout = 'circular') #+ theme_tree2() + geom_tiplab()
#
ggtree(phyl, mrsd=as.Date('2019-12-01'), aes(x, y)) + theme_tree2() + geom_tiplab(size = 3) #+ geom_rootedge()
# ggplot(phyl, aes(x, y)) + geom_tree(layout = 'circular') #+ theme_tree2() + geom_tiplab()
#
# ggtree(phyl, mrsd=as.Date('2019-12-01'), aes(x, y)) + theme_tree2() + geom_tiplab(size = 3) #+ geom_rootedge()
ggplot(phyl, aes(x,y)) + geom_tree() + theme_tree() + geom_tiplab()
# ggplot(phyl, aes(x, y)) + geom_tree(layout = 'circular') #+ theme_tree2() + geom_tiplab()
#
# ggtree(phyl, mrsd=as.Date('2019-12-01'), aes(x, y)) + theme_tree2() + geom_tiplab(size = 3) #+ geom_rootedge()
ggplot(phyl, mrsd = min(dates$date), aes(x,y)) + geom_tree() + theme_tree() + geom_tiplab()
# ggplot(phyl, aes(x, y)) + geom_tree(layout = 'circular') #+ theme_tree2() + geom_tiplab()
#
# ggtree(phyl, mrsd=as.Date('2019-12-01'), aes(x, y)) + theme_tree2() + geom_tiplab(size = 3) #+ geom_rootedge()
ggplot(phyl, mrsd = min(dates$date), aes(x,y)) + geom_tree() + theme_tree2() + geom_tiplab()
?ggtree
plotTreeTime(phyl, dates$date, color = T, show.tip.label = T,
root.edge = F, cex = 0.8, use.edge.length = T, align.tip.label = F
x.lim = c(as.Date('2021-05-01'))
)
x.lim = c(as.Date('2021-05-01')
)
root.edge = F, cex = 0.8, use.edge.length = T, align.tip.label = F,
plotTreeTime(phyl, dates$date, color = T, show.tip.label = T,
root.edge = F, cex = 0.8, use.edge.length = T, align.tip.label = F,
x.lim = c(as.Date('2021-05-01'))
)
plotTreeTime(phyl, dates$date, color = T, show.tip.label = T,
root.edge = F, cex = 0.8, use.edge.length = T, align.tip.label = F,
x.lim = c(as.Date('2019-12-01'), as.Date('2021-05-01'))
)
plotTreeTime(phyl, dates$date, use.edge.length = T, no.margin = F, x.lim = c(as.Date('2019-12-01'), as.Date('2021-05-01')))
plotTreeTime(phyl, dates$date, color = T, show.tip.label = T,
root.edge = F, cex = 0.8, use.edge.length = T, align.tip.label = F)#,
plotTreeTime(phyl, dates$date, color = T, show.tip.label = T,
root.edge = F, cex = 0.8, use.edge.length = T, align.tip.label = F)#,
setwd("~/Sequencing/FINAL/PhylTree/v3/timetree020522/")
library(ape)
library(paleotree)
phyl <- ape::read.nexus("divergence_tree.nexus")
plot(phyl)
dates <- read.csv('~/Sequencing/FINAL/PhylTree/v3/input_treeTimev3.csv', header = T)
dates <- dates[order(ordered(dates$name, levels = phyl$tip.label)),]
dates$date = as.Date(dates$date)
plotTreeTime(phyl, dates$date, use.edge.length = T, no.margin = F)#, x.lim = c(as.Date('2019-12-01'), as.Date('2021-05-01')))
setwd("~/Sequencing/FINAL/PhylTree/v3/timetree020522/")
library(ape)
library(paleotree)
phyl <- ape::read.nexus("divergence_tree.nexus")
plot(phyl)
dates <- read.csv('~/Sequencing/FINAL/PhylTree/v3/input_treeTimev3.csv', header = T)
dates <- dates[order(ordered(dates$name, levels = phyl$tip.label)),]
dates$date = as.Date(dates$date)
plotTreeTime(phyl, dates$date, use.edge.length = T, no.margin = F)#, x.lim = c(as.Date('2019-12-01'), as.Date('2021-05-01')))
plotTreeTime(phyl, dates$date, use.edge.length = T, no.margin = F,
show.tip.label = T)#, x.lim = c(as.Date('2019-12-01'), as.Date('2021-05-01')))
plotTreeTime(phyl, dates$date, use.edge.length = T, no.margin = F,
show.tip.label = T, x.lim = c(as.Date('2019-12-01'), as.Date('2021-05-01')))
plotTreeTime(phyl, dates$date, use.edge.length = T, no.margin = F,
show.tip.label = T)#, x.lim = c(as.Date('2019-12-01'), as.Date('2021-05-01')))
?plotTreeTime
?plot.phylo
plotTreeTime(phyl, dates$date, use.edge.length = T, no.margin = F,
show.tip.label = T, align.tip.label = T)#, x.lim = c(as.Date('2019-12-01'), as.Date('2021-05-01')))
p <- ggtree(phyl) %<+% dates
library(dplyr)
p <- ggtree(phyl) %<+% dates
library(tidyverse)
p <- ggtree(phyl) %<+% dates
?'%<+%'
??'%<+%'
library(ggtree)
?'%<+%'
p <- ggtree(phyl) %<+% dates
p +
# geom_nodepoint() +
geom_tiplab() +
geom_tippoint() +
theme_tree2()
p
dates
phyl
?geom_treescale
p + geom_treescale(x = date)
class(dates$date)
p + geom_treescale()
p + geom_treescale(x = 1)
p + geom_treescale(y = 1)
p + geom_treescale()
p + geom_treescale() +
# geom_nodepoint() +
geom_tiplab() +
geom_tippoint() +
theme_tree2()
p +
# geom_treescale() +
# geom_nodepoint() +
geom_tiplab() +
geom_tippoint() +
theme_tree2()
head(dates)
annot_data <- dates
colnames(annot_data) <- c('node','date')
head(annot_data)
p <- ggtree(phyl) %<+% annot_data
class(annot_data$node)
annot_data$node
as.integer(annot_data$node)
phyl
phyl$node.label
class(phyl$node.label)
phyl$tip.label
class(phyl$tip.label)
annot_data$node = as.character(annot_data$node)
p <- ggtree(phyl) %<+% annot_data
annot_data$node
class(annot_data$node)
class(phyl$tip.label)
class(phyl$node.label)
class(phyl$node)
phyl$node
df_tip_data
install.packages("TDbook")
library(TDbook)
df_tip_data
df_inode_data
tree_boots
annot_data <- dates
p <- ggtree(phyl) %<+% annot_data
p
phyl
class(df_tip_data)
class(annot_data)
?scale_size_continuous
p <- ggtree(phyl, as.Date = T) %<+% annot_data
p +
# geom_treescale() +
# geom_nodepoint() +
geom_tiplab() +
geom_tippoint() +
theme_tree2()
p
p <- ggtree(phyl, mrsd = min(dates$date), as.Date = T) %<+% annot_data
p <- ggtree(phyl, mrsd = max(dates$date), as.Date = T) %<+% annot_data
p
p +
# geom_treescale() +
# geom_nodepoint() +
geom_tiplab() +
geom_tippoint() +
theme_tree2()
max(dates$date)
p <- ggtree(phyl, mrsd = max(dates$date), as.Date = T)
p
p
p + geom_treescale()
p <- ggtree(phyl, mrsd = max(dates$date), as.Date = T) %<+% annot_data
p
p +
# geom_treescale() +
# geom_nodepoint() +
geom_tiplab() +
geom_tippoint() +
theme_tree2()
p +
# geom_treescale() +
# geom_nodepoint() +
geom_tiplab()
p +
# geom_treescale() +
# geom_nodepoint() +
geom_tiplab() +
geom_tippoint()
p +
# geom_treescale() +
# geom_nodepoint() +
geom_tiplab() +
geom_tippoint() +
theme_tree2()
?theme_tree2
max(dates$date)
# ggplot(phyl, aes(x, y)) + geom_tree(layout = 'circular') #+ theme_tree2() + geom_tiplab()
#
ggtree(phyl, mrsd = max(dates$date), aes(x, y)) + theme_tree2() + geom_tiplab(size = 3) #+ geom_rootedge()
p <- ggtree(phyl, mrsd = max(dates$date), aes(x, y), as.Date = T) %<+% annot_data
p
p +
# geom_treescale() +
# geom_nodepoint() +
geom_tiplab() +
geom_tippoint() +
theme_tree2()
# ggplot(phyl, aes(x, y)) + geom_tree(layout = 'circular') #+ theme_tree2() + geom_tiplab()
#
ggtree(phyl, mrsd = max(dates$date)) + theme_tree2() + geom_tiplab(size = 3) #+ geom_rootedge()
# ggplot(phyl, aes(x, y)) + geom_tree(layout = 'circular') #+ theme_tree2() + geom_tiplab()
#
ggtree(phyl, mrsd = max(dates$date), as.Date = T) + theme_tree2() + geom_tiplab(size = 3) #+ geom_rootedge()
ggplot(phyl) + geom_tree() + theme_tree() + geom_tiplab()
ggplot(phyl) + geom_tree(mrsd = max(dates$date)) + theme_tree() + geom_tiplab()
p <- ggtree(phyl, mrsd = max(dates$date), aes(x, y), as.Date = T, ladderize = F) %<+% annot_data
p +
# geom_treescale() +
# geom_nodepoint() +
geom_tiplab() +
geom_tippoint() +
theme_tree2()
p <- ggtree(phyl, mrsd = max(dates$date), aes(x, y), as.Date = T, ladderize = T) %<+% annot_data
p +
# geom_treescale() +
# geom_nodepoint() +
geom_tiplab() +
geom_tippoint() +
theme_tree2()
?geom_tree
p <- ggtree(phyl, mrsd = max(dates$date), aes(x, y), as.Date = T, ladderize = F, layout = 'dendrogram') %<+% annot_data
p +
# geom_treescale() +
# geom_nodepoint() +
geom_tiplab() +
geom_tippoint() +
theme_tree2()
p <- ggtree(phyl, mrsd = max(dates$date), aes(x, y), as.Date = T, ladderize = F, layout = 'slanted') %<+% annot_data
p <- ggtree(phyl, mrsd = max(dates$date), aes(x, y), as.Date = T, ladderize = F, layout = 'roundrect') %<+% annot_data
p +
# geom_treescale() +
# geom_nodepoint() +
geom_tiplab() +
geom_tippoint() +
theme_tree2()
p <- ggtree(phyl, mrsd = max(dates$date), aes(x, y), as.Date = T, ladderize = F, layout = 'circular') %<+% annot_data
p +
# geom_treescale() +
# geom_nodepoint() +
geom_tiplab() +
geom_tippoint() +
theme_tree2()
p <- ggtree(phyl, mrsd = max(dates$date), aes(x, y), as.Date = T, ladderize = F, layout = 'daylight') %<+% annot_data
p +
# geom_treescale() +
# geom_nodepoint() +
geom_tiplab() +
geom_tippoint() +
theme_tree2()
p <- ggtree(phyl, mrsd = max(dates$date), aes(x, y), as.Date = T, ladderize = F, layout = 'radial') %<+% annot_data
p +
# geom_treescale() +
# geom_nodepoint() +
geom_tiplab() +
geom_tippoint() +
theme_tree2()
p <- ggtree(phyl, mrsd = max(dates$date), aes(x, y), as.Date = T, ladderize = F, layout = 'rectangular') %<+% annot_data
p +
# geom_treescale() +
# geom_nodepoint() +
geom_tiplab() +
geom_tippoint() +
theme_tree2()
p +
# geom_treescale() +
# geom_nodepoint() +
geom_tiplab() +
geom_tippoint() +
theme_tree2() +
scale_x_ggtree()
?scale_x_ggtree
p +
# geom_treescale() +
# geom_nodepoint() +
geom_tiplab() +
geom_tippoint() +
theme_tree2() +
scale_x_ggtree(breaks = c(1,2,3))
jpeg('time_tree.jpg', width = 20, height = 20, units = 'cm', res = 300)
dates$date
p +
# geom_treescale() +
# geom_nodepoint() +
geom_tiplab() +
geom_tippoint() +
theme_tree2() +
scale_x_ggtree(breaks = c('2019-12-01', '2020-10-01', '2020-12-01', '2021-03-01'))
as.Date(c('2019-12-01', '2020-10-01', '2020-12-01', '2021-03-01'))
p +
# geom_treescale() +
# geom_nodepoint() +
geom_tiplab() +
geom_tippoint() +
theme_tree2() +
scale_x_ggtree(breaks = as.Date(c('2019-12-01', '2020-10-01', '2020-12-01', '2021-03-01')))
p <- ggtree(phyl, mrsd = max(dates$date), aes(x, y), as.Date = T, ladderize = F, layout = 'rectangular') %<+% annot_data
p +
# geom_treescale() +
# geom_nodepoint() +
geom_tiplab() +
# geom_tippoint() +
theme_tree2() +
scale_x_ggtree(breaks = as.Date(c('2019-12-01', '2020-10-01', '2020-12-01', '2021-03-01')))
p <- ggtree(phyl, mrsd = max(dates$date), aes(x, y), as.Date = T, ladderize = F, layout = 'rectangular') %<+% annot_data
p +
# geom_treescale() +
# geom_nodepoint() +
geom_tiplab() +
# geom_tippoint() +
theme_tree2() #+
p
p +
# geom_treescale() +
# geom_nodepoint() +
geom_tiplab() +
# geom_tippoint() +
theme_tree2() #+
p <- ggtree(phyl, mrsd = max(dates$date), aes(x, y), as.Date = T, ladderize = F, layout = 'rectangular') %<+% annot_data
p
phyl
pij
class(dates$date)
p +
# geom_treescale() +
# geom_nodepoint() +
geom_tiplab() +
# geom_tippoint() +
theme_tree2() +
scale_x_ggtree(breaks = dates$date)
?xlim_tree
p +
# geom_treescale() +
# geom_nodepoint() +
geom_tiplab() +
# geom_tippoint() +
theme_tree2() +
xlim_tree(5)
p +
# geom_treescale() +
# geom_nodepoint() +
geom_tiplab() +
# geom_tippoint() +
theme_tree2() +
xlim_tree(dates$date)
p <- ggtree(phyl, mrsd = max(dates$date), aes(x, y), as.Date = T, ladderize = F, layout = 'rectangular') %<+% annot_data
p
library('rstantools')
library('usethis')
library('roxygen2')
# ?rstan_create_package
# rstan_create_package('C:\\Users\\lucp9385\\Documents\\GitHub\\BMABMDR',
# roxygen=T, travis=T, license=T, auto_config=T)
# Set working directory to the new package directory
setwd('C:\\Users\\lucp9385\\Documents\\GitHub\\BMABMDR')
list.files(all.files=T)
# file.show('DESCRIPTION')
# file.show('Read-and-delete-me')
# file.remove('Read-and-delete-me')
## Save all Stan files in the 'inst/stan' subdirectory
# when installing the package these will be saved in the list 'stanmodels' that is used by R to function the package
## All functions to be used by R should be saved in the 'R/' directory
Sys.getenv("BINPREF") # should be "C:/rtools40/mingw64/bin/"
Sys.setenv(BINPREF = "C:/Rtools/mingw_64/bin/")
old_path <- Sys.getenv("PATH")
# new_path <- paste("C:/Rtools/usr/bin", old_path, sep=";")
new_path <- paste(old_path, "C:\\Rtools\\mingw_32\\bin", sep=";")
new_path
Sys.setenv(PATH = new_path)
# https://cran.r-project.org/web/packages/rstantools/vignettes/minimal-rstan-package.html
## Compile package and generate the documentation
example(source)
try(roxygen2::roxygenize(load_code = sourceDir), silent = TRUE)
rstan_config() # recompile stan models
pkgbuild::compile_dll()
roxygen2::roxygenize() # generate documentation
# devtools::reload()
# devtools::check()
devtools::build() # build source package
library('rstantools')
library('usethis')
library('roxygen2')
# Set working directory to the new package directory
setwd('C:\\Users\\lucp9385\\Documents\\GitHub\\BMABMDR')
list.files(all.files=T)
Sys.getenv("BINPREF") # should be "C:/rtools40/mingw64/bin/"
Sys.setenv(BINPREF = "C:/Rtools/mingw_64/bin/")
old_path <- Sys.getenv("PATH")
# new_path <- paste("C:/Rtools/usr/bin", old_path, sep=";")
new_path <- paste(old_path, "C:\\Rtools\\mingw_32\\bin", sep=";")
new_path
Sys.setenv(PATH = new_path)
## Compile package and generate the documentation
example(source)
try(roxygen2::roxygenize(load_code = sourceDir), silent = TRUE)
rstan_config() # recompile stan models
library('rstantools')
library('usethis')
library('roxygen2')
# Set working directory to the new package directory
setwd('C:\\Users\\lucp9385\\Documents\\GitHub\\BMABMDR')
list.files(all.files=T)
Sys.getenv("BINPREF") # should be "C:/rtools40/mingw64/bin/"
Sys.setenv(BINPREF = "C:/Rtools/mingw_64/bin/")
old_path <- Sys.getenv("PATH")
# new_path <- paste("C:/Rtools/usr/bin", old_path, sep=";")
new_path <- paste(old_path, "C:\\Rtools\\mingw_32\\bin", sep=";")
new_path
Sys.setenv(PATH = new_path)
## Compile package and generate the documentation
example(source)
try(roxygen2::roxygenize(load_code = sourceDir), silent = TRUE)
rstan_config() # recompile stan models
rstan_config() # recompile stan models
pkgbuild::compile_dll()
roxygen2::roxygenize() # generate documentation
library(Rcpp)
roxygen2::roxygenize() # generate documentation
traceback()
library(devtools)
roxygen2::roxygenize() # generate documentation
try(roxygen2::roxygenize(load_code = sourceDir), silent = TRUE)
rstan_config() # recompile stan models
pkgbuild::compile_dll()
roxygen2::roxygenize() # generate documentation
?PREP_DATA_N_C
?reload
?check?
f
?check
library('rstantools')
library('usethis')
library('roxygen2')
# Set working directory to the new package directory
setwd('C:\\Users\\lucp9385\\Documents\\GitHub\\BMABMDR')
list.files(all.files=T)
Sys.getenv("BINPREF") # should be "C:/rtools40/mingw64/bin/"
Sys.setenv(BINPREF = "C:/Rtools/mingw_64/bin/")
old_path <- Sys.getenv("PATH")
# new_path <- paste("C:/Rtools/usr/bin", old_path, sep=";")
new_path <- paste(old_path, "C:\\Rtools\\mingw_32\\bin", sep=";")
new_path
Sys.setenv(PATH = new_path)
Sys.getenv("PATH")
## Compile package and generate the documentation
example(source)
try(roxygen2::roxygenize(load_code = sourceDir), silent = TRUE)
rstan_config() # recompile stan models
pkgbuild::compile_dll()
roxygen2::roxygenize() # generate documentation
library('rstantools')
library('usethis')
library('roxygen2')
library('rstantools')
library('usethis')
library('roxygen2')
# Set working directory to the new package directory
setwd('C:\\Users\\lucp9385\\Documents\\GitHub\\BMABMDR')
list.files(all.files=T)
Sys.getenv("BINPREF") # should be "C:/rtools40/mingw64/bin/"
Sys.setenv(BINPREF = "C:/Rtools/mingw_64/bin/")
old_path <- Sys.getenv("PATH")
# new_path <- paste("C:/Rtools/usr/bin", old_path, sep=";")
new_path <- paste(old_path, "C:\\Rtools\\mingw_32\\bin", sep=";")
new_path
Sys.setenv(PATH = new_path)
## Compile package and generate the documentation
example(source)
try(roxygen2::roxygenize(load_code = sourceDir), silent = TRUE)
rstan_config() # recompile stan models
pkgbuild::compile_dll()
roxygen2::roxygenize() # generate documentation
